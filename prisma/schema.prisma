generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("POSTGRES_URL")
  relationMode = "prisma"
}

model UserCredits {
  id          String   @id @default(cuid())
  userId      String   @unique
  credits     Int      @default(0)
  usedCredits Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("user_credits")
}

model UserSubscription {
  id                     String    @id @default(cuid())
  userId                 String    @unique
  stripeCustomerId       String?   @unique @map(name: "stripe_customer_id")
  stripeSubscriptionId   String?   @unique @map(name: "stripe_subscription_id")
  stripePriceId          String?   @map(name: "stripe_price_id")
  stripeCurrentPeriodEnd DateTime? @map(name: "stripe_current_period_end")
  createdAt              DateTime  @default(now())
  updatedAt              DateTime  @updatedAt

  @@map("user_subscription")
}

model File {
  id           Int        @id @default(autoincrement())
  userId       String     @map("user_id")
  createdAt    DateTime   @default(now()) @map("created_at")
  fileKey      String?     @unique @map("file_key")
  fileUrl      String?     @map("file_url")
  fileName     String     @map("file_name")
  type         String
  resultedFile String?    @map("resulted_file")
  resultedFile2 String?    @map("resulted_file2")
  status       FileStatus
  results      Json?

  @@index([userId])
  @@map("files") 
}


enum FileStatus {
  PROCESSING
  COMPLETED
  FAILED
}
